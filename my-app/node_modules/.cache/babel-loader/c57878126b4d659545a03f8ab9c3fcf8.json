{"ast":null,"code":"import * as types from './../constants/ActionTypes.js';\nimport * as config from './../constants/Config';\nimport { remove, reject } from 'lodash';\n\nconst uuidv4 = require('uuid/v4');\n\nlet inititalDefault = [{\n  id: 1,\n  name: 'reactjs',\n  status: 0\n}, {\n  id: 2,\n  name: 'html&css',\n  status: 1\n}];\nlet tasks = JSON.parse(localStorage.getItem(config.ITEMS_FROM_LOCAL_STOGARE));\ninititalDefault = tasks !== null && tasks.length > 0 ? tasks : inititalDefault;\n\nconst items = (state = inititalDefault, action) => {\n  let id = null;\n\n  switch (action.type) {\n    case types.DELETE_ITEM:\n      id = action.id;\n      remove(state, item => {\n        return item.id === id;\n      });\n      localStorage.setItem(config.ITEMS_FROM_LOCAL_STOGARE, JSON.stringify(state));\n      return [...state];\n\n    case types.SUBMIT_FORM:\n      let item = action.item;\n\n      if (item.id !== '') {\n        id = item.id;\n        state = reject(state, {\n          id: item.id\n        });\n      } else {\n        id = uuidv4();\n      }\n\n      state.push({\n        id: id,\n        name: item.name,\n        status: +item.status\n      });\n      localStorage.setItem(config.ITEMS_FROM_LOCAL_STOGARE, JSON.stringify(state));\n      return [...state];\n\n    default:\n      return state;\n  }\n};\n\nexport default items;","map":{"version":3,"sources":["/Users/thoanguyen/Downloads/react-training/React Zendvn/Chaper 2/todolist redux react 2/my-app/src/reducers/items.js"],"names":["types","config","remove","reject","uuidv4","require","inititalDefault","id","name","status","tasks","JSON","parse","localStorage","getItem","ITEMS_FROM_LOCAL_STOGARE","length","items","state","action","type","DELETE_ITEM","item","setItem","stringify","SUBMIT_FORM","push"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,+BAAvB;AACA,OAAO,KAAKC,MAAZ,MAAwB,uBAAxB;AACA,SAAQC,MAAR,EAAeC,MAAf,QAA4B,QAA5B;;AACA,MAAMC,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAtB;;AACA,IAAIC,eAAe,GAAE,CACrB;AACCC,EAAAA,EAAE,EAAC,CADJ;AAECC,EAAAA,IAAI,EAAC,SAFN;AAGCC,EAAAA,MAAM,EAAC;AAHR,CADqB,EAMpB;AACAF,EAAAA,EAAE,EAAC,CADH;AAEAC,EAAAA,IAAI,EAAC,UAFL;AAGAC,EAAAA,MAAM,EAAC;AAHP,CANoB,CAArB;AAYA,IAAIC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBb,MAAM,CAACc,wBAA5B,CAAX,CAAZ;AACAT,eAAe,GAAII,KAAK,KAAG,IAAR,IAAcA,KAAK,CAACM,MAAN,GAAa,CAA5B,GAAgCN,KAAhC,GAAsCJ,eAAxD;;AAEA,MAAMW,KAAK,GAAG,CAACC,KAAK,GAAEZ,eAAR,EAAyBa,MAAzB,KAAoC;AACjD,MAAIZ,EAAE,GAAG,IAAT;;AACA,UAAOY,MAAM,CAACC,IAAd;AACC,SAAKpB,KAAK,CAACqB,WAAX;AACAd,MAAAA,EAAE,GAAGY,MAAM,CAACZ,EAAZ;AACAL,MAAAA,MAAM,CAACgB,KAAD,EAAQI,IAAD,IAAQ;AACpB,eAAOA,IAAI,CAACf,EAAL,KAAYA,EAAnB;AACA,OAFK,CAAN;AAGAM,MAAAA,YAAY,CAACU,OAAb,CAAqBtB,MAAM,CAACc,wBAA5B,EAAqDJ,IAAI,CAACa,SAAL,CAAeN,KAAf,CAArD;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AAEA,SAAKlB,KAAK,CAACyB,WAAX;AACA,UAAIH,IAAI,GAAGH,MAAM,CAACG,IAAlB;;AACA,UAAGA,IAAI,CAACf,EAAL,KAAU,EAAb,EAAgB;AACfA,QAAAA,EAAE,GAAGe,IAAI,CAACf,EAAV;AACAW,QAAAA,KAAK,GAACf,MAAM,CAACe,KAAD,EAAO;AAACX,UAAAA,EAAE,EAACe,IAAI,CAACf;AAAT,SAAP,CAAZ;AACA,OAHD,MAGM;AACLA,QAAAA,EAAE,GAAGH,MAAM,EAAX;AACA;;AACDc,MAAAA,KAAK,CAACQ,IAAN,CAAW;AACVnB,QAAAA,EAAE,EAACA,EADO;AAEVC,QAAAA,IAAI,EAACc,IAAI,CAACd,IAFA;AAGVC,QAAAA,MAAM,EAAC,CAACa,IAAI,CAACb;AAHH,OAAX;AAKAI,MAAAA,YAAY,CAACU,OAAb,CAAqBtB,MAAM,CAACc,wBAA5B,EAAqDJ,IAAI,CAACa,SAAL,CAAeN,KAAf,CAArD;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AACA;AACC,aAAOA,KAAP;AAzBF;AA2BA,CA7BD;;AA8BA,eAAeD,KAAf","sourcesContent":["import * as types from './../constants/ActionTypes.js';\nimport * as config from './../constants/Config';\nimport {remove,reject} from 'lodash';\nconst uuidv4 = require('uuid/v4');\nlet inititalDefault =[\n{\n\tid:1,\n\tname:'reactjs',\n\tstatus:0\n},\n\t{\n\tid:2,\n\tname:'html&css',\n\tstatus:1\n}\n]; \nlet tasks = JSON.parse(localStorage.getItem(config.ITEMS_FROM_LOCAL_STOGARE));\ninititalDefault = (tasks!==null&&tasks.length>0)? tasks:inititalDefault;\n\nconst items = (state =inititalDefault ,action) => {\n\tlet id = null; \n\tswitch(action.type){\n\t\tcase types.DELETE_ITEM:\n\t\tid = action.id;\n\t\tremove(state,(item)=>{\n\t\t\treturn item.id === id\n  });\n\t\tlocalStorage.setItem(config.ITEMS_FROM_LOCAL_STOGARE,JSON.stringify(state))\n\t\treturn [...state];\n\n\t\tcase types.SUBMIT_FORM:\n\t\tlet item = action.item;\n\t\tif(item.id!==''){\n\t\t\tid = item.id;\n\t\t\tstate=reject(state,{id:item.id})\n\t\t} else{\n\t\t\tid = uuidv4();\n\t\t}\n\t\tstate.push({\n\t\t\tid:id,\n\t\t\tname:item.name,\n\t\t\tstatus:+item.status\n\t\t})\n\t\tlocalStorage.setItem(config.ITEMS_FROM_LOCAL_STOGARE,JSON.stringify(state))\n\t\treturn [...state];\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\nexport default items; "]},"metadata":{},"sourceType":"module"}