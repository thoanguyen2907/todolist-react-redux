{"ast":null,"code":"import * as types from './../constants/ActionTypes.js';\nimport { remove, reject } from 'lodash';\nimport * as config from './../constants/Config';\n\nconst uuidv4 = require('uuid/v4');\n\nlet initialDefault = [{\n  id: uuidv4(),\n  name: 'reactjs',\n  status: 0\n}, {\n  id: uuidv4(),\n  name: 'html&css',\n  status: 1\n}];\nlet tasks = JSON.parse(localStorage.getItem(config.ITEMS_FROM_LOCAL_STOGARE));\ninitialDefault = tasks !== null && tasks.length > 0 ? tasks : initialDefault;\n\nconst items = (state = initialDefault, action) => {\n  let id = null;\n\n  switch (action.type) {\n    case types.DELETE_ITEM:\n      id = action.id;\n      remove(state, item => {\n        return item.id === id;\n      });\n      localStorage.setItem(config.ITEMS_FROM_LOCAL_STOGARE, JSON.stringify(state));\n      return [...state];\n\n    case types.SUBMIT_FORM:\n      let item = action.item;\n\n      if (item.id !== '') {\n        id = item.id;\n        state = reject(state, {\n          id: item.id\n        });\n      } else {\n        id = uuidv4();\n      }\n\n      state.push({\n        id: id,\n        name: item.name,\n        status: +item.status\n      });\n      localStorage.setItem(config.ITEMS_FROM_LOCAL_STOGARE, JSON.stringify(state));\n      return [...state];\n\n    default:\n      return state;\n  }\n};\n\nexport default items;","map":{"version":3,"sources":["/Users/thoanguyen/Downloads/react-training/React Zendvn/Chaper 2/todolist redux react 2/my-app/src/reducers/items.js"],"names":["types","remove","reject","config","uuidv4","require","initialDefault","id","name","status","tasks","JSON","parse","localStorage","getItem","ITEMS_FROM_LOCAL_STOGARE","length","items","state","action","type","DELETE_ITEM","item","setItem","stringify","SUBMIT_FORM","push"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,+BAAvB;AACA,SAAQC,MAAR,EAAeC,MAAf,QAA4B,QAA5B;AACA,OAAO,KAAKC,MAAZ,MAAwB,uBAAxB;;AACA,MAAMC,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAtB;;AACA,IAAIC,cAAc,GAAG,CACrB;AACCC,EAAAA,EAAE,EAACH,MAAM,EADV;AAECI,EAAAA,IAAI,EAAC,SAFN;AAGCC,EAAAA,MAAM,EAAC;AAHR,CADqB,EAMrB;AACCF,EAAAA,EAAE,EAACH,MAAM,EADV;AAECI,EAAAA,IAAI,EAAC,UAFN;AAGCC,EAAAA,MAAM,EAAC;AAHR,CANqB,CAArB;AAaA,IAAIC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBX,MAAM,CAACY,wBAA5B,CAAX,CAAZ;AACAT,cAAc,GAAII,KAAK,KAAG,IAAR,IAAgBA,KAAK,CAACM,MAAN,GAAa,CAA9B,GAAkCN,KAAlC,GAA0CJ,cAA3D;;AACA,MAAMW,KAAK,GAAG,CAACC,KAAK,GAACZ,cAAP,EAAuBa,MAAvB,KAAkC;AAC/C,MAAIZ,EAAE,GAAG,IAAT;;AACA,UAAOY,MAAM,CAACC,IAAd;AACC,SAAKpB,KAAK,CAACqB,WAAX;AACAd,MAAAA,EAAE,GAAGY,MAAM,CAACZ,EAAZ;AACAN,MAAAA,MAAM,CAACiB,KAAD,EAAQI,IAAD,IAAQ;AACjB,eAAOA,IAAI,CAACf,EAAL,KAAYA,EAAnB;AACH,OAFK,CAAN;AAGDM,MAAAA,YAAY,CAACU,OAAb,CAAqBpB,MAAM,CAACY,wBAA5B,EAAqDJ,IAAI,CAACa,SAAL,CAAeN,KAAf,CAArD;AACC,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AAEA,SAAKlB,KAAK,CAACyB,WAAX;AACA,UAAIH,IAAI,GAAGH,MAAM,CAACG,IAAlB;;AACA,UAAGA,IAAI,CAACf,EAAL,KAAU,EAAb,EAAgB;AACfA,QAAAA,EAAE,GAACe,IAAI,CAACf,EAAR;AACAW,QAAAA,KAAK,GAAChB,MAAM,CAACgB,KAAD,EAAO;AAACX,UAAAA,EAAE,EAACe,IAAI,CAACf;AAAT,SAAP,CAAZ;AACA,OAHD,MAGO;AACNA,QAAAA,EAAE,GAACH,MAAM,EAAT;AACA;;AACDc,MAAAA,KAAK,CAACQ,IAAN,CAAW;AACVnB,QAAAA,EAAE,EAAEA,EADM;AAEVC,QAAAA,IAAI,EAACc,IAAI,CAACd,IAFA;AAGVC,QAAAA,MAAM,EAAC,CAACa,IAAI,CAACb;AAHH,OAAX;AAKDI,MAAAA,YAAY,CAACU,OAAb,CAAqBpB,MAAM,CAACY,wBAA5B,EAAqDJ,IAAI,CAACa,SAAL,CAAeN,KAAf,CAArD;AACE,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AACD;AACC,aAAOA,KAAP;AAzBF;AA4BA,CA9BD;;AA+BA,eAAeD,KAAf","sourcesContent":["import * as types from './../constants/ActionTypes.js';\nimport {remove,reject} from 'lodash';\nimport * as config from './../constants/Config';\nconst uuidv4 = require('uuid/v4');\nlet initialDefault = [\n{\n\tid:uuidv4(),\n\tname:'reactjs',\n\tstatus:0\n},\n{\n\tid:uuidv4(),\n\tname:'html&css',\n\tstatus:1,\n\n}\n];\nlet tasks = JSON.parse(localStorage.getItem(config.ITEMS_FROM_LOCAL_STOGARE));\ninitialDefault = (tasks!==null && tasks.length>0)? tasks : initialDefault;\nconst items = (state=initialDefault, action) => {\n\tlet id = null;\n\tswitch(action.type){\n\t\tcase types.DELETE_ITEM:\n\t\tid = action.id;\n\t\tremove(state,(item)=>{\n    \t\treturn item.id === id\n  });\n\tlocalStorage.setItem(config.ITEMS_FROM_LOCAL_STOGARE,JSON.stringify(state))\n\t\treturn [...state];\n\t\t\n\t\tcase types.SUBMIT_FORM:\n\t\tlet item = action.item;\n\t\tif(item.id!==''){\n\t\t\tid=item.id;\n\t\t\tstate=reject(state,{id:item.id})\n\t\t} else {\n\t\t\tid=uuidv4();\n\t\t}\n\t\tstate.push({\n\t\t\tid: id,\n\t\t\tname:item.name,\n\t\t\tstatus:+item.status\n\t\t})\n\tlocalStorage.setItem(config.ITEMS_FROM_LOCAL_STOGARE,JSON.stringify(state))\n\t\t\treturn [...state]\n\t\tdefault:\n\t\t\treturn state\n\t}\n\t\n}\nexport default items;"]},"metadata":{},"sourceType":"module"}